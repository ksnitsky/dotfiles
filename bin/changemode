#!/bin/bash

prefer_theme=$(gsettings get org.gnome.desktop.interface color-scheme)

if [[ "$prefer_theme" == *"prefer-dark"* ]]; then 
    mode="light"
else
    mode="dark"
fi

script_dir="$HOME/.local/share/$mode-mode.d"

if [ ! -d "$script_dir" ]; then
    echo "Directory '$script_dir' does not exist."
    exit 1
fi

for script in "$script_dir"/*.sh; do
    if [ -f "$script" ] && [ -x "$script" ]; then
        "$script"
    else
        echo "Skipping $script, either not executable or not a regular file."
    fi
done
